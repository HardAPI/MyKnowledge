# 操作系统

### 1.进程与线程的区别

**进程（Process）** 是计算机中的程序关于某数据集合上的一次运行活动，是系统进行**资源分配**和调度的基本单位，是操作系统结构的基础。也是程序的实体。

**线程** 是操作系统能够调度的最小单位。被包含于线程之中，是进程的实际运作单位。一条线程指的是进程中一个**单一顺序的控制流**，一个进程中可以并发多个线程，每条线程并行执行不同的任务。

1. 线程是**程序执行**的最小单位，而进程是操作系统**分配资源**的最小单位；
2. 一个进程由一个或多个线程组成，线程是一个进程中代码的不同**执行路线**

3. 进程之间相互**独立**，但同一进程下的各个线程之间共享程序的内存空间(包括代码段，数据集，堆等)及一些进程级的资源(如打开文件和信号等)，某进程内的线程在其他进程不可见；

4. **调度和切换**：线程上下文切换比进程上下文切换要快得多



### 2.内核态和用户态的区别

这两个是指CPU的运行状态

**内核态（Kernel Mode）**：运行**操作系统程序**，操作硬件

**用户态（User Mode）**：运行**用户程序**

根据状态不同，指令的**权限**也不同。例如启动I/O、内存清零、修改程序状态字等等只能由操作系统使用，而用户态仅能使用算术运算、取数指令、**访管指令**（主动陷入内核态，让操作系统帮忙执行某些指令）等**非特权指令**

根据权限等级也会划分为R0，R1，R2，R3。R0相当于内核态，R3相当于用户态。

转换：

**用户态->内核态**：**中断**（**当外围设备完成用户请求的操作后，会向CPU发出相应的中断信号**，这时CPU会暂停执行下一条即将要执行的指令转而去执行与中断信号对应的处理程序）

​						  	**异常**，用户态程序发生异常，会切换到处理异常的相关内核态程序，例如缺页异常。

​		 					 **系统调用**，也就是主动陷入内核态，让操作系统执行指令，例如fork（）

**内核态->用户态**：设置程序状态字PSW



用户态能访问的**内存空间和对象**受到控制，占有的处理器也是**可被抢占的**

内核态时，能访问**所有**内存空间和对象，而且处理器**不允许被抢占**

### 3.内存管理
内存管理分为四个部分：内存分配、内存扩容、逻辑地址到物理地址的转换、内存保护

**内存分配**：段式存储（连续存储），页式存储（片段式存储）、段页式存储（结合两点优点）、gc操作

**内存扩容**：利用虚拟内存或自动覆盖技术，从逻辑上扩充内存

**地址转换**：代码的逻辑地址到实际地址的转换，重定位寄存器存放装入模块的起始位置，此时逻辑地址的偏移量+起始位置=目标地址

**内存保护**：自行查看




### 4.操作系统的种类

1. **批处理系统**：用户将作业交给系统操作员，系统操作员在收到作业后，并不立即将作业输入计算机，而是收到一定数量的用户作业之后，组成一批作业，再把这批作业输入到计算机中。
2. **分时系统**：在一台主机上连接了多台终端，同时允许多个用户通过自己的终端，以交互式使用计算机，共享主机中的资源。
3. **实时操作系统**：使计算机能在规定的时间内及时响应外部事件的请求，同时完成对该事件的处理，并能够控制所有实施设备和实时任务协调一致地工作的操作系统。



### 5.中断

​		中断是指由于接收到来自外围硬件（相对于中央处理器和内存）的异步信号或来自软件的同步信号，而进行相应的硬件／软件处理。发出这样的信号称为进行中断请求（interrupt request，IRQ）。硬件中断导致处理器通过一个上下文切换（context switch）来保存执行状态（以程序计数器和程序状态字等寄存器信息为主）；软件中断则通常作为CPU指令集中的一个指令，以可编程的方式直接指示这种上下文切换，并将处理导向一段中断处理代码。中断在计算机多任务处理，尤其是实时系统中尤为有用。这样的系统，包括运行于其上的操作系统，也被称为“中断驱动的”（interrupt-driven）。
